machine:
    python:
        version: 3.5.1

dependencies:
    cache_directories:
        - /home/ubuntu/.cache/pip
    override:
        - sudo add-apt-repository ppa:fkrull/deadsnakes -y
        - sudo apt-get update -y
        - sudo apt-get install -y python3.5-dev libsnappy-dev libhdf5-serial-dev
        - pip install --upgrade pip
        - pip install pytest flake8 numpy cython scipy
        - bash install-xgboost.sh
        - pip install -e . --process-dependency-links

test:
    override:
        - flake8 {{cookiecutter.repo_name}}
        - bash run_tests.sh