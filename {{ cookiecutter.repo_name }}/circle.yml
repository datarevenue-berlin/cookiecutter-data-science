machine:
    python:
        version: 3.5.1
    environment:
        LLVM_CONFIG: /usr/bin/llvm-config-3.8

dependencies:
    cache_directories:
        - /home/ubuntu/.cache/pip
    override:
        - sudo add-apt-repository ppa:fkrull/deadsnakes -y
        - sudo apt-get update -y
        - sudo apt-get install -y python3.5-dev
        - sudo apt-get install -y libopenblas-dev
        - sudo apt-get install -y libhdf5-serial-dev
        - sudo apt-get install -y wamerican
        - sudo apt-get install -y libedit-dev
        - sudo apt-get install -y llvm-3.8-dev
        - pip install -r requirements.txt 2>&1:
            timeout: 1200
        - pip install git+https://github.com/kayibal/sciluigi.git@stable#egg=sciluigi-1.0
        - pip install dask[complete] distributed xgboost
        - pip install git+https://github.com/dask/dask.git -U

test:
    override:
        - flake8 {{cookiecutter.repo_name}}
        - ./run_tests.sh